# Priority groups (lower runs first, hooks within a group run in parallel):
#   0 - Formatting & Validation
#   1 - Dependency Analysis
#   2 - Python Formatting
#   3 - Linting
#   4 - Static Type checking

repos:
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v6.0.0
    hooks:
      - id: check-merge-conflict
      - id: check-toml
      - id: check-yaml
      - id: trailing-whitespace
      - id: check-ast
      - id: check-case-conflict
      - id: end-of-file-fixer
      - id: detect-private-key
      - id: check-added-large-files

  - repo: https://github.com/crate-ci/typos
    rev: v1.43.5
    hooks:
      - id: typos
        priority: 0

  - repo: https://github.com/tox-dev/pyproject-fmt
    rev: v2.16.1
    hooks:
      - id: pyproject-fmt
        priority: 0

  - repo: https://github.com/rvben/rumdl-pre-commit
    rev: v0.1.23
    hooks:
      - id: rumdl-fmt
        priority: 0

  - repo: https://github.com/astral-sh/uv-pre-commit
    rev: 0.10.4
    hooks:
      - id: uv-lock
        priority: 0

  - repo: https://github.com/fpgmaas/deptry.git
    rev: 0.24.0
    hooks:
      - id: deptry
        priority: 1

  - repo: https://github.com/pysentry/pysentry-pre-commit
    rev: v0.4.2
    hooks:
      - id: pysentry
        priority: 1

  - repo: local
    hooks:
      - id: ruff-format
        name: Ruff format
        entry: uv run --frozen --no-sync ruff format
        language: system
        types_or: [python, pyi]
        priority: 2

      - id: ruff-check
        name: Ruff check
        entry: uv run --frozen --no-sync ruff check --fix --exit-non-zero-on-fix
        language: system
        types_or: [python, pyi]
        priority: 3

      - id: ty
        name: Ty
        entry: uv run --frozen --no-sync ty check
        language: system
        pass_filenames: false
        types_or: [python, pyi]
        priority: 4

      - id: pyrefly-check
        name: Pyrefly (informational)
        entry: bash -c 'uv run --frozen --no-sync pyrefly check --output-format omit-errors || true'
        language: system
        pass_filenames: false
        types_or: [python, pyi]
        verbose: true
        priority: 4
